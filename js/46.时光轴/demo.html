<!DOCTYPE html>
<html>
    <head>
        <!-- 声明当前页面编码集:utf-8国际编码 -->
        <meta http-equiv='Content-type' content='text/html; charset=utf-8'/>
        <title>please enter your title</title>
        <!-- 关键词字数限制在31字，用英文逗号隔开 -->
        <meta name="Keywords" content="TT">
        <!-- 简介描述 -->
        <meta name="description" content="TT">
        <style>
            *{margin:0;padding:0;}
            ul{list-style:none;}
            #nav{
                display: none;
                position: fixed;
                width: 100%;
                height: 42px;
                background: #b8bdc5;
                z-index: 2;
            }
            #nav i{
                display: block;
                width: 300px;
                height:100%;
                background: url("img/TTlogo.png") no-repeat center/contain;
                font-size: 0;
            }
            #useless{
                margin: auto;
                width:1000px;
                height:800px;
                background: #2f80c5;
            }
            #wrap{
                position: relative;
                margin: auto;
                width:1000px;
            }
            #content ul{
                margin-top: 17px;
            }
            #content ul li{
                position: relative;
                margin-left:17px ;
                padding:0 0 50px 30px;
                border-left: 1px dashed;
            }
            #content ul li img{
                display: block;
                width:500px;
                height:380px;
            }
            #content ul li p{
                line-height: 35px;
                margin-bottom: 10px;
            }
            #content ul li span{
                position: absolute;
                left:-16px;
                top:0;
                width:32px;
                height:32px;
                background: #5BC648;
                border-radius: 50%;
                color:#ffffff;
                text-align: center;
                line-height: 32px;
            }
            #under{
                margin: 50px auto;
                width: 800px;
                height:1000px;
                background: #56585c;
            }
            #content ol{
                display: none;
                position: fixed;
                top:40px;
                margin-left: 2px;
                background: #ffffff;
                overflow: hidden;
            }
            #content ol li{
                width:32px;
                height:32px;
                background: #bbbbbb;
                border-radius: 50%;
                color:#ffffff;
                text-align: center;
                line-height: 32px;
                cursor: pointer;
            }
            #content ol li.on{
                background: #5BC648;
            }
        </style>
    </head>
    <body>
        <!--TT logo-->
        <div id="nav"><i>TT Logo</i></div>
        <div id="useless"></div>
        <div id="wrap">
            <div id="content">
                <ul>
                    <li>
                        <p>这是第一个内容这是第一个内容这是第一个内容这是第一个内容这是第一个内容这是第一个内容这是第一个内容这是第一个内容这是第一个内容</p>
                        <img src="" alt="" style="background: #9ec59a">
                        <span>1</span>
                    </li>
                    <li>
                        <p>这是第二个内容这是第二个内容这是第二个内容这是第二个内容这是第二个内容这是第二个内容这是第二个内容这是第二个内容这是第二个内容这是第二个内容这是第二个内容这是第二个内容这是第二个内容这是第二个内容这是第二个内容</p>
                        <img src="" alt="" style="background: #957cc5">
                        <span>2</span>
                    </li>
                    <li>
                        <p>这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容这是第三个内容</p>
                        <img src="" alt=""style="background: #44c5a8">
                        <span>3</span>
                    </li>
                    <li>
                        <p>这是第四个内容这是第四个内容这是第四个内容这是第四个内容这是第四个内容</p>
                        <img src="" alt=""style="background: #c56778">
                        <span>4</span>
                    </li>
                    <li>
                        <p>这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容这是第五个内容</p>
                        <img src="" alt=""style="background: #c546b3">
                        <span>5</span>
                    </li>
                    <li>
                        <p>这是第六个内容</p>
                        <img src="" alt=""style="background: #5fc540">
                        <span>6</span>
                    </li>
                    <li>
                        <p>这是第七个内容</p>
                        <img src="" alt=""style="background: #229cc5">
                        <span>7</span>
                    </li>
                    <li>
                        <p>这是第八个内容</p>
                        <img src="" alt=""style="background: #745f65">
                        <span>8</span>
                    </li>
                    <li>
                        <p>这是第九个内容</p>
                        <img src="" alt=""style="background: #4c05b2">
                        <span>9</span>
                    </li>
                </ul>
                <ol>
                    <li>1</li>
                    <li>2</li>
                    <li>3</li>
                    <li>4</li>
                    <li>5</li>
                    <li>6</li>
                    <li>7</li>
                    <li>8</li>
                    <li>9</li>
                </ol>
            </div>
        </div>
        <div id="under"></div>
        <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
        <script>
            window.onload = function () {
                {
                    //获取元素
                    let[$oNav,$content] = [$("#nav"),$("#content")]
                    let[$oLi,$ool,$olLi] = [$content.find("ul li"),$content.find("ol"),$content.find("ol li")];
                    let[topArr,length,minT,maxT,index] = [[],$oLi.length];
                    const navH = $oNav.height();
                    const spanH = $oLi.find("span").height();

                    //获取每个li滚动高度
                    $oLi.each(function (i) {
                        topArr[i] = $(this).offset().top;
                    })
                    minT = topArr[0] - $oNav.height();
                    maxT = $content.height() + $content.offset().top - navH - spanH*length;
                    $(window).scroll(function () {
                        let Tscroll = $(document).scrollTop();
                        //吸顶
                        $oNav[Tscroll>=200?"show":"hide"]();

                        if(Tscroll < minT ){
                            $ool.hide();
                        }else if(Tscroll <= maxT){
                            $ool.show();
                            $ool.css({
                                top: navH
                            });
                            for(let i = 0; i < length; i++){
                                if(Tscroll >= topArr[i] - navH - spanH*i){
                                    index = i;
                                }
                                else{
                                    break;
                                }
                            }
                            $ool.height(spanH*(index+1));
                            $olLi.removeClass("on").eq(index).addClass("on");
                        }
                        else {
                            let x = Math.ceil((Tscroll - maxT)/spanH);
                            $ool.css({
                                top: navH-x*spanH
                            });
                        }
                    });
                    //点击实现
                    $olLi.click(function () {
                        $("body,html").stop().animate({
                            scrollTop:topArr[$(this).index()]-navH
                        });
                    });
                }
            }
            /*                    let $oNav = $("#nav");
                    let $content = $("#content");
                    let $oLi = $content.find("ul li");
                    let $ool = $content.find("ol");
                    let $olLi = $content.find("ol li");
                    let topArr = [];
                    let length = $oLi.length;
                    let minT;
                    let maxT;
                    let index = 0;
                    const navH = $oNav.height();
                    const spanH = $oLi.find("span").height();*/
        </script>
    </body>
</html>